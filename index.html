<!doctype html>
<html lang="fa" dir="rtl">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Animal Research News</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            background-color: #ffffff;
            color: #333333;
            line-height: 1.8;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background-color: #f5f5f5;
            padding: 40px 0;
            border-bottom: 2px solid #e0e0e0;
        }

        .site-title {
            font-size: 2.5em;
            font-weight: bold;
            color: #2c2c2c;
            margin-bottom: 10px;
            text-align: center;
        }

        /* About Section */
        .about-section {
            background-color: #fafafa;
            padding: 40px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .about-title {
            font-size: 1.8em;
            color: #2c2c2c;
            margin-bottom: 20px;
            text-align: center;
        }

        .about-description {
            font-size: 1.1em;
            color: #555555;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.9;
        }

        /* Main Content */
        main {
            padding: 60px 0;
            min-height: 60%;
        }

        .page-title {
            font-size: 2em;
            color: #2c2c2c;
            margin-bottom: 40px;
            text-align: center;
            font-weight: normal;
        }

        /* Article Grid */
        .articles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .article-card {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            overflow: hidden;
            cursor: pointer;
            transition: box-shadow 0.3s ease;
        }

        .article-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .article-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            display: block;
        }

        .article-card-content {
            padding: 25px;
        }

        .article-card-title {
            font-size: 1.4em;
            color: #2c2c2c;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .article-card-excerpt {
            font-size: 1em;
            color: #666666;
            line-height: 1.7;
            margin-bottom: 15px;
        }

        /* Article Stats */
        .article-stats {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
            font-size: 0.9em;
            color: #888888;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .star-rating {
            display: flex;
            gap: 2px;
        }

        .star {
            color: #ddd;
            font-size: 1.1em;
        }

        .star.filled {
            color: #ffc107;
        }

        .like-button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2em;
            padding: 0;
            transition: transform 0.2s;
        }

        .like-button:hover {
            transform: scale(1.2);
        }

        .like-button.liked {
            color: #e74c3c;
        }

        .like-button:not(.liked) {
            color: #ddd;
        }

        /* Article Detail Page */
        .article-detail {
            max-width: 800px;
            margin: 0 auto;
        }

        .article-header {
            margin-bottom: 40px;
            text-align: center;
        }

        .article-detail-title {
            font-size: 2.2em;
            color: #2c2c2c;
            margin-bottom: 20px;
            font-weight: bold;
            line-height: 1.4;
        }

        .article-meta {
            font-size: 0.95em;
            color: #888888;
            margin-bottom: 30px;
        }

        .article-featured-image {
            width: 100%;
            height: auto;
            margin-bottom: 40px;
            border: 1px solid #e0e0e0;
        }

        .article-content {
            font-size: 1.1em;
            color: #444444;
            line-height: 1.9;
        }

        .article-content p {
            margin-bottom: 25px;
        }

        .article-content img {
            width: 100%;
            height: auto;
            margin: 30px 0;
            border: 1px solid #e0e0e0;
        }

        .article-content h2 {
            font-size: 1.6em;
            color: #2c2c2c;
            margin: 40px 0 20px 0;
            font-weight: bold;
        }

        .back-button {
            display: inline-block;
            padding: 12px 30px;
            background-color: #2c2c2c;
            color: #ffffff;
            text-decoration: none;
            font-size: 1em;
            margin-bottom: 40px;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .back-button:hover {
            background-color: #444444;
        }

        /* Comments Section */
        .comments-section {
            margin-top: 60px;
            padding-top: 40px;
            border-top: 2px solid #e0e0e0;
        }

        .comments-title {
            font-size: 1.8em;
            color: #2c2c2c;
            margin-bottom: 30px;
        }

        .rating-section {
            background-color: #fafafa;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 40px;
        }

        .rating-title {
            font-size: 1.2em;
            color: #2c2c2c;
            margin-bottom: 15px;
        }

        .rating-stars {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .rating-star {
            font-size: 2em;
            cursor: pointer;
            color: #ddd;
            transition: color 0.2s;
        }

        .rating-star:hover,
        .rating-star.active {
            color: #ffc107;
        }

        .comment-form {
            background-color: #fafafa;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 40px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-size: 1em;
            color: #2c2c2c;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: inherit;
            font-size: 1em;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .submit-button {
            background-color: #2c2c2c;
            color: #ffffff;
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .submit-button:hover {
            background-color: #444444;
        }

        .submit-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .comments-list {
            margin-top: 40px;
        }

        .comment-item {
            background-color: #fafafa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .comment-author {
            font-weight: bold;
            color: #2c2c2c;
        }

        .comment-date {
            font-size: 0.85em;
            color: #888888;
        }

        .comment-rating {
            display: flex;
            gap: 3px;
            margin-bottom: 10px;
        }

        .comment-text {
            color: #444444;
            line-height: 1.7;
        }

        .loading-message {
            text-align: center;
            padding: 20px;
            color: #888888;
        }

        .error-message {
            background-color: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        /* Footer */
        footer {
            background-color: #2c2c2c;
            color: #ffffff;
            text-align: center;
            padding: 30px 0;
            margin-top: 60px;
        }

        .footer-text {
            font-size: 0.95em;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .site-title {
                font-size: 1.8em;
            }

            .about-title {
                font-size: 1.4em;
            }

            .about-description {
                font-size: 1em;
                padding: 0 10px;
            }

            .page-title {
                font-size: 1.6em;
            }

            .articles-grid {
                grid-template-columns: 1fr;
                gap: 25px;
            }

            .article-card img {
                height: 200px;
            }

            .article-card-content {
                padding: 20px;
            }

            .article-card-title {
                font-size: 1.2em;
            }

            .article-stats {
                flex-wrap: wrap;
                gap: 10px;
            }

            .article-detail-title {
                font-size: 1.7em;
            }

            .article-content {
                font-size: 1em;
            }

            .article-content h2 {
                font-size: 1.4em;
            }

            .rating-stars {
                gap: 5px;
            }

            .rating-star {
                font-size: 1.5em;
            }

            header {
                padding: 30px 0;
            }

            .about-section {
                padding: 30px 0;
            }

            main {
                padding: 40px 0;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }

            .site-title {
                font-size: 1.5em;
            }

            .article-card-content {
                padding: 15px;
            }

            .back-button {
                padding: 10px 20px;
                font-size: 0.95em;
            }

            .comment-form,
            .rating-section {
                padding: 20px;
            }
        }

        .hidden {
            display: none;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- Header -->
  <header>
   <div class="container">
    <h1 class="site-title" id="siteTitle">Animal Research News</h1>
   </div>
  </header><!-- About Section -->
  <section class="about-section">
   <div class="container">
    <h2 class="about-title" id="aboutTitle">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§</h2>
    <p class="about-description" id="aboutDescription">Ù‡Ø¯Ù Ø§ÛŒÙ† ÙˆØ¨â€ŒØ³Ø§ÛŒØªØŒ Ø§Ù†ØªØ´Ø§Ø± Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ù„Ù…ÛŒ Ùˆ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¯Ø± Ø²Ù…ÛŒÙ†Ù‡â€ŒÛŒ Ù…Ø±Ø§Ù‚Ø¨ØªØŒ Ø²ÛŒØ¨Ø§ÛŒÛŒØŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ù‡Ø¯Ø§Ø´ØªÛŒ Ùˆ Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Ø­ÛŒÙˆØ§Ù†Ø§Øª Ø®Ø§Ù†Ú¯ÛŒ (Ø¨Ù‡â€ŒÙˆÛŒÚ˜Ù‡ Ø³Ú¯â€ŒÙ‡Ø§) Ø§Ø³Øª.</p>
   </div>
  </section><!-- Main Content -->
  <main>
   <div class="container"><!-- Articles List Page -->
    <div id="articlesListPage">
     <h2 class="page-title">Ù…Ù‚Ø§Ù„Ø§Øª Ùˆ Ø§Ø®Ø¨Ø§Ø±</h2>
     <div class="articles-grid" id="articlesGrid"></div>
    </div><!-- Article Detail Page -->
    <div id="articleDetailPage" class="hidden"><button class="back-button" id="backButton">â† Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ÙÙ‡Ø±Ø³Øª Ù…Ù‚Ø§Ù„Ø§Øª</button>
     <article class="article-detail" id="articleDetail"></article><!-- Comments Section -->
     <div class="comments-section">
      <h2 class="comments-title">Ù†Ø¸Ø±Ø§Øª Ùˆ Ø§Ù…ØªÛŒØ§Ø²Ù‡Ø§</h2><!-- Rating Section -->
      <div class="rating-section">
       <h3 class="rating-title">Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§ Ø¨Ù‡ Ø§ÛŒÙ† Ù…Ù‚Ø§Ù„Ù‡:</h3>
       <div class="rating-stars" id="ratingStars"><span class="rating-star" data-rating="1">â˜…</span> <span class="rating-star" data-rating="2">â˜…</span> <span class="rating-star" data-rating="3">â˜…</span> <span class="rating-star" data-rating="4">â˜…</span> <span class="rating-star" data-rating="5">â˜…</span>
       </div>
      </div><!-- Comment Form -->
      <div class="comment-form">
       <form id="commentForm">
        <div class="form-group"><label for="authorName">Ù†Ø§Ù… Ø´Ù…Ø§:</label> <input type="text" id="authorName" required placeholder="Ù†Ø§Ù… Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
        </div>
        <div class="form-group"><label for="commentText">Ù†Ø¸Ø± Ø´Ù…Ø§:</label> <textarea id="commentText" required placeholder="Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea>
        </div><button type="submit" class="submit-button" id="submitButton">Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±</button>
       </form>
       <div id="formError" class="error-message hidden"></div>
      </div><!-- Comments List -->
      <div class="comments-list" id="commentsList"></div>
     </div>
    </div>
   </div>
  </main><!-- Footer -->
  <footer>
   <div class="container">
    <p class="footer-text" id="footerText">Â© 2025 Animal Research News</p>
   </div>
  </footer>
  <script>
        const defaultConfig = {
            site_title: "Animal Research News",
            about_title: "Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ø§",
            about_description: "Ù‡Ø¯Ù Ø§ÛŒÙ† ÙˆØ¨â€ŒØ³Ø§ÛŒØªØŒ Ø§Ù†ØªØ´Ø§Ø± Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ù„Ù…ÛŒ Ùˆ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¯Ø± Ø²Ù…ÛŒÙ†Ù‡â€ŒÛŒ Ù…Ø±Ø§Ù‚Ø¨ØªØŒ Ø²ÛŒØ¨Ø§ÛŒÛŒØŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ù‡Ø¯Ø§Ø´ØªÛŒ Ùˆ Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Ø­ÛŒÙˆØ§Ù†Ø§Øª Ø®Ø§Ù†Ú¯ÛŒ (Ø¨Ù‡â€ŒÙˆÛŒÚ˜Ù‡ Ø³Ú¯â€ŒÙ‡Ø§) Ø§Ø³Øª.",
            footer_text: "Â© 2025 Animal Research News",
            background_color: "#ffffff",
            surface_color: "#f5f5f5",
            text_color: "#2c2c2c",
            primary_action_color: "#2c2c2c",
            secondary_action_color: "#444444"
        };

        const articles = [
            {
                id: 1,
                title: "Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¬Ø§Ù…Ø¹ Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Ø³Ú¯â€ŒÙ‡Ø§",
                excerpt: "Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ ÛŒÚ©ÛŒ Ø§Ø² Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø§Ù‚Ø¨Øª Ø§Ø² Ø³Ú¯â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù†Ú¯ÛŒ Ø§Ø³Øª. Ø¯Ø± Ø§ÛŒÙ† Ù…Ù‚Ø§Ù„Ù‡ Ø¨Ù‡ Ø¨Ø±Ø±Ø³ÛŒ ØªÚ©Ù†ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ùˆ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ù…ÛŒâ€ŒÙ¾Ø±Ø¯Ø§Ø²ÛŒÙ….",
                image: "dog-grooming.jpg",
                author: "Ø¯Ú©ØªØ± Ø³Ø§Ø±Ø§ Ø§Ø­Ù…Ø¯ÛŒ",
                date: "Û±Ûµ Ø¯ÛŒ Û±Û´Û°Û³",
                content: `
                    <p>Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Ø³Ú¯â€ŒÙ‡Ø§ ÙØ±Ø§ØªØ± Ø§Ø² ÛŒÚ© ÙØ±Ø¢ÛŒÙ†Ø¯ Ø²ÛŒØ¨Ø§ÛŒÛŒ Ø³Ø§Ø¯Ù‡ Ø§Ø³Øª. Ø§ÛŒÙ† ÙØ±Ø¢ÛŒÙ†Ø¯ Ø´Ø§Ù…Ù„ Ù…Ø±Ø§Ù‚Ø¨Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ù‡Ø¯Ø§Ø´ØªÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø³Ù„Ø§Ù…Øª Ù¾ÙˆØ³Øª Ùˆ Ù…ÙˆØŒ Ø¨Ù‡Ø¯Ø§Ø´Øª Ø¯Ù‡Ø§Ù† Ùˆ Ú¯ÙˆØ´ØŒ Ùˆ Ø±Ø§Ø­ØªÛŒ Ú©Ù„ÛŒ Ø­ÛŒÙˆØ§Ù† Ø±Ø§ ØªØ¶Ù…ÛŒÙ† Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>
                    
                    <img src="dog-grooming.jpg" alt="Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø³Ú¯">
                    
                    <h2>Ù…Ø±Ø§Ø­Ù„ Ø§ØµÙ„ÛŒ Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯</h2>
                    <p>Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø´Ø§Ù…Ù„ Ú†Ù†Ø¯ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ Ø§Ø³Øª: Ø´Ø³ØªØ´Ùˆ Ø¨Ø§ Ø´Ø§Ù…Ù¾ÙˆÙ‡Ø§ÛŒ Ù…Ø®ØµÙˆØµØŒ Ø®Ø´Ú© Ú©Ø±Ø¯Ù† Ø¨Ø§ Ø³Ø´ÙˆØ§Ø± Ø­Ø±ÙÙ‡â€ŒØ§ÛŒØŒ Ø¨Ø±Ø³ Ø²Ø¯Ù† Ùˆ Ø´Ø§Ù†Ù‡ Ú©Ø±Ø¯Ù† Ù…ÙˆØŒ Ú©ÙˆØªØ§Ù‡ Ú©Ø±Ø¯Ù† Ù†Ø§Ø®Ù†â€ŒÙ‡Ø§ØŒ Ùˆ ØªÙ…ÛŒØ² Ú©Ø±Ø¯Ù† Ú¯ÙˆØ´â€ŒÙ‡Ø§.</p>
                    
                    <p>Ø¯Ø± Ù…Ø±Ø­Ù„Ù‡â€ŒÛŒ Ø®Ø´Ú©â€ŒÚ©Ø±Ø¯Ù† Ù…ÙˆØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø³Ø´ÙˆØ§Ø± Ù…Ø®ØµÙˆØµ Ø­ÛŒÙˆØ§Ù†Ø§Øª Ø§Ù‡Ù…ÛŒØª Ø²ÛŒØ§Ø¯ÛŒ Ø¯Ø§Ø±Ø¯. Ø³Ø´ÙˆØ§Ø±Ù‡Ø§ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ù…Ø®ØµÙˆØµ Ù¾ØªØŒ Ø¯Ù…Ø§ÛŒ Ú©Ù†ØªØ±Ù„â€ŒØ´Ø¯Ù‡â€ŒØ§ÛŒ Ø¯Ø§Ø±Ù†Ø¯ ØªØ§ Ø¨Ù‡ Ù¾ÙˆØ³Øª Ø­ÛŒÙˆØ§Ù† Ø¢Ø³ÛŒØ¨ Ù†Ø±Ø³Ø§Ù†Ù†Ø¯.</p>
                    
                    <h2>Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ</h2>
                    <p>Ø¨Ø±Ø§ÛŒ Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒØŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø§Ø±ÛŒØ¯: Ø¨Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØµÙˆØµ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹ Ù…ÙˆØŒ Ø´Ø§Ù…Ù¾ÙˆÙ‡Ø§ÛŒ Ø¨Ø§ pH Ù…Ù†Ø§Ø³Ø¨ØŒ Ù‚ÛŒÚ†ÛŒ Ùˆ Ù…Ø§Ø´ÛŒÙ† Ø§ØµÙ„Ø§Ø­ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒØŒ Ùˆ Ù†Ø§Ø®Ù†â€ŒÚ¯ÛŒØ± Ù…Ø®ØµÙˆØµ Ø³Ú¯.</p>
                    
                    <p>Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø¨Ø²Ø§Ø± Ù…Ù†Ø§Ø³Ø¨ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ú˜Ø§Ø¯ Ùˆ Ù†ÙˆØ¹ Ù…ÙˆÛŒ Ø³Ú¯ Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù… Ø§Ø³Øª. Ø³Ú¯â€ŒÙ‡Ø§ÛŒ Ø¨Ø§ Ù…ÙˆÛŒ Ø¨Ù„Ù†Ø¯ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØµÙˆØµ Ùˆ Ù…Ø±Ø§Ù‚Ø¨Øª Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø±Ù†Ø¯.</p>
                `
            },
            {
                id: 2,
                title: "ØªØ±Ù†Ø¯Ù‡Ø§ÛŒ Ø±Ù†Ú¯ÛŒ Ø¯Ø± Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Û²Û°Û²Ûµ",
                excerpt: "Ø¨Ø±Ø±Ø³ÛŒ Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ† ØªØ±Ù†Ø¯Ù‡Ø§ÛŒ Ø±Ù†Ú¯â€ŒØ¢Ù…ÛŒØ²ÛŒ Ùˆ Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ Ø±ÙˆØ² Ø¯Ø± Ø¯Ù†ÛŒØ§ÛŒ Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Ø­ÛŒÙˆØ§Ù†Ø§Øª Ø®Ø§Ù†Ú¯ÛŒ Ø¨Ø§ ØªØ£Ú©ÛŒØ¯ Ø¨Ø± Ø§ÛŒÙ…Ù†ÛŒ Ùˆ Ø³Ù„Ø§Ù…Øª Ø­ÛŒÙˆØ§Ù†.",
                image: "color-trend.png",
                author: "Ù…Ù‡Ø³Ø§ Ú©Ø±ÛŒÙ…ÛŒ",
                date: "Û±Û° Ø¯ÛŒ Û±Û´Û°Û³",
                content: `
                    <p>Ø¯Ø± Ø³Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±ØŒ Ø±Ù†Ú¯â€ŒØ¢Ù…ÛŒØ²ÛŒ Ù…ÙˆÛŒ Ø­ÛŒÙˆØ§Ù†Ø§Øª Ø®Ø§Ù†Ú¯ÛŒ Ø¨Ù‡ ÛŒÚ©ÛŒ Ø§Ø² Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† ØªØ±Ù†Ø¯Ù‡Ø§ÛŒ Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ ØªØ¨Ø¯ÛŒÙ„ Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§Ù…Ø§ Ø§ÛŒÙ† Ú©Ø§Ø± Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Ø±Ø¹Ø§ÛŒØª Ú©Ø§Ù…Ù„ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ø§ÛŒÙ…Ù†ÛŒ Ùˆ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ø­ØµÙˆÙ„Ø§Øª Ù…Ø®ØµÙˆØµ Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯.</p>
                    
                    <img src="color-trend.png" alt="ØªØ±Ù†Ø¯Ù‡Ø§ÛŒ Ø±Ù†Ú¯ÛŒ Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯">
                    
                    <h2>Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø¨ÙˆØ¨ Û²Û°Û²Ûµ</h2>
                    <p>Ø§Ù…Ø³Ø§Ù„ Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ù¾Ø§Ø³ØªÙ„ÛŒ Ùˆ Ø·Ø¨ÛŒØ¹ÛŒ Ø¨ÛŒØ´ØªØ± Ù…ÙˆØ±Ø¯ ØªÙˆØ¬Ù‡ Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ‡â€ŒØ§Ù†Ø¯. Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒÛŒ Ù…Ø§Ù†Ù†Ø¯ ØµÙˆØ±ØªÛŒ Ù…Ù„Ø§ÛŒÙ…ØŒ Ø¢Ø¨ÛŒ Ø¢Ø³Ù…Ø§Ù†ÛŒØŒ Ùˆ Ø¨Ù†ÙØ´ Ù„Ø§ÙˆÙ†Ø¯Ø±ÛŒ Ø¯Ø± ØµØ¯Ø± Ù…Ø­Ø¨ÙˆØ¨ÛŒØª Ù‡Ø³ØªÙ†Ø¯.</p>
                    
                    <p>Ù†Ú©ØªÙ‡ Ù…Ù‡Ù… Ø§ÛŒÙ† Ø§Ø³Øª Ú©Ù‡ Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ ØºÛŒØ±Ø³Ù…ÛŒ Ùˆ Ù…Ø®ØµÙˆØµ Ø­ÛŒÙˆØ§Ù†Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯. Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ù‡ Ú¯ÙˆÙ†Ù‡â€ŒØ§ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ Ú©Ù‡ Ø¨Ù‡ Ù¾ÙˆØ³Øª Ùˆ Ù…ÙˆÛŒ Ø­ÛŒÙˆØ§Ù† Ø¢Ø³ÛŒØ¨ Ù†Ø±Ø³Ø§Ù†Ù†Ø¯.</p>
                    
                    <h2>Ù†Ú©Ø§Øª Ø§ÛŒÙ…Ù†ÛŒ</h2>
                    <p>Ù‚Ø¨Ù„ Ø§Ø² Ù‡Ø± Ú¯ÙˆÙ†Ù‡ Ø±Ù†Ú¯â€ŒØ¢Ù…ÛŒØ²ÛŒØŒ Ø­ØªÙ…Ø§Ù‹ ØªØ³Øª Ø­Ø³Ø§Ø³ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯. Ù‡Ù…Ú†Ù†ÛŒÙ† Ø§Ø² Ø±Ù†Ú¯ Ú©Ø±Ø¯Ù† Ù†ÙˆØ§Ø­ÛŒ Ø­Ø³Ø§Ø³ Ù…Ø§Ù†Ù†Ø¯ Ø§Ø·Ø±Ø§Ù Ú†Ø´Ù… Ùˆ Ú¯ÙˆØ´ Ø®ÙˆØ¯Ø¯Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯.</p>
                    
                    <p>Ù…Ø´ÙˆØ±Øª Ø¨Ø§ Ø¯Ø§Ù…Ù¾Ø²Ø´Ú© Ù‚Ø¨Ù„ Ø§Ø² Ø±Ù†Ú¯â€ŒØ¢Ù…ÛŒØ²ÛŒØŒ Ø¨Ù‡â€ŒØ®ØµÙˆØµ Ø¨Ø±Ø§ÛŒ Ø­ÛŒÙˆØ§Ù†Ø§ØªÛŒ Ú©Ù‡ Ù…Ø´Ú©Ù„Ø§Øª Ù¾ÙˆØ³ØªÛŒ Ø¯Ø§Ø±Ù†Ø¯ØŒ Ø¨Ø³ÛŒØ§Ø± Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª.</p>
                `
            },
            {
                id: 3,
                title: "Ù…Ø¹Ø±ÙÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Ø¨Ø±ÙˆÚ©Ù„ÛŒÙ†",
                excerpt: "Ø¨Ø±Ø±Ø³ÛŒ ØªØ®ØµØµÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø±Ù†Ø¯ Ø¨Ø±ÙˆÚ©Ù„ÛŒÙ†ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ù¾ÛŒØ´Ú¯Ø§Ù…Ø§Ù† ØµÙ†Ø¹Øª Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¨Ø§ ØªÙ…Ø±Ú©Ø² Ø¨Ø± Ú©ÛŒÙÛŒØª Ùˆ Ø§ÛŒÙ…Ù†ÛŒ.",
                image: "brooklyn-products.png",
                author: "Ø§Ù…ÛŒØ± Ø±Ø¶Ø§ÛŒÛŒ",
                date: "Ûµ Ø¯ÛŒ Û±Û´Û°Û³",
                content: `
                    <p>Ø¨Ø±Ù†Ø¯ Ø¨Ø±ÙˆÚ©Ù„ÛŒÙ† Ø¨Ø§ Ø¨ÛŒØ´ Ø§Ø² Û²Û° Ø³Ø§Ù„ ØªØ¬Ø±Ø¨Ù‡ Ø¯Ø± ØµÙ†Ø¹Øª Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ù…Ø¹ØªØ¨Ø±ØªØ±ÛŒÙ† ØªÙˆÙ„ÛŒØ¯Ú©Ù†Ù†Ø¯Ú¯Ø§Ù† Ù…Ø­ØµÙˆÙ„Ø§Øª Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø±Ø§Ù‚Ø¨Øª Ø§Ø² Ø­ÛŒÙˆØ§Ù†Ø§Øª Ø®Ø§Ù†Ú¯ÛŒ Ø§Ø³Øª.</p>
                    
                    <img src="brooklyn-products.png" alt="Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø±ÙˆÚ©Ù„ÛŒÙ†">
                    
                    <h2>Ù…Ø­ØµÙˆÙ„Ø§Øª Ù¾Ø±ÙØ±ÙˆØ´</h2>
                    <p>Ø´Ø§Ù…Ù¾ÙˆÙ‡Ø§ÛŒ Ø¨Ø±ÙˆÚ©Ù„ÛŒÙ† Ø¨Ø§ ÙØ±Ù…ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø·Ø¨ÛŒØ¹ÛŒ Ùˆ pH Ù…ØªØ¹Ø§Ø¯Ù„ØŒ Ø¨Ø±Ø§ÛŒ Ø§Ù†ÙˆØ§Ø¹ Ù…Ø®ØªÙ„Ù Ù¾ÙˆØ³Øª Ùˆ Ù…Ùˆ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯. Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„Ø§Øª Ø­Ø§ÙˆÛŒ Ø¹ØµØ§Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ú¯ÛŒØ§Ù‡ÛŒ Ùˆ ÙˆÛŒØªØ§Ù…ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ù‡Ø³ØªÙ†Ø¯.</p>
                    
                    <p>Ù†Ø±Ù…â€ŒÚ©Ù†Ù†Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ø¨Ø±Ù†Ø¯ Ù†ÛŒØ² Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø±ÙˆØºÙ†â€ŒÙ‡Ø§ÛŒ Ø·Ø¨ÛŒØ¹ÛŒ Ù…Ø§Ù†Ù†Ø¯ Ø¢Ø±Ú¯Ø§Ù† Ùˆ Ø¬ÙˆØ¬ÙˆØ¨Ø§ØŒ Ù…ÙˆÛŒ Ø­ÛŒÙˆØ§Ù† Ø±Ø§ Ù†Ø±Ù… Ùˆ Ø¯Ø±Ø®Ø´Ø§Ù† Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ Ø¨Ø¯ÙˆÙ† Ø§ÛŒÙ†Ú©Ù‡ Ø¨Ø§Ù‚ÛŒâ€ŒÙ…Ø§Ù†Ø¯Ù‡ Ú†Ø±Ø¨ Ø±ÙˆÛŒ Ù…Ùˆ Ø¨Ú¯Ø°Ø§Ø±Ù†Ø¯.</p>
                    
                    <h2>ØªÙØ§ÙˆØª Ø¨Ø§ Ø³Ø§ÛŒØ± Ø¨Ø±Ù†Ø¯Ù‡Ø§</h2>
                    <p>Ø¨Ø±ÙˆÚ©Ù„ÛŒÙ† Ø§Ø² Ù…ÙˆØ§Ø¯ Ø´ÛŒÙ…ÛŒØ§ÛŒÛŒ Ù…Ø¶Ø± Ù…Ø§Ù†Ù†Ø¯ Ù¾Ø§Ø±Ø§Ø¨Ù†ØŒ Ø³ÙˆÙ„ÙØ§ØªØŒ Ùˆ Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ù…ØµÙ†ÙˆØ¹ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯. ØªÙ…Ø§Ù… Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§ÛŒÙ† Ø¨Ø±Ù†Ø¯ ØªØ³Øª Ø´Ø¯Ù‡ Ùˆ Ø¯Ø§Ø±Ø§ÛŒ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ†â€ŒØ§Ù„Ù…Ù„Ù„ÛŒ Ù‡Ø³ØªÙ†Ø¯.</p>
                    
                    <p>Ù‚ÛŒÙ…Øª Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ø±ÙˆÚ©Ù„ÛŒÙ† Ù†Ø³Ø¨Øª Ø¨Ù‡ Ú©ÛŒÙÛŒØª Ø¨Ø§Ù„Ø§ÛŒ Ø¢Ù†â€ŒÙ‡Ø§ Ø¨Ø³ÛŒØ§Ø± Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª Ùˆ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¯Ø± Ø³Ø§Ù„Ù†â€ŒÙ‡Ø§ÛŒ Ú¯Ø±ÙˆÙ…ÛŒÙ†Ú¯ ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
                `
            }
        ];

        let currentArticle = null;
        let allComments = [];
        let selectedRating = 0;
        let articleViews = {};
        let articleLikes = {};

        // Initialize views and likes from localStorage
        function initializeStats() {
            const savedViews = localStorage.getItem('articleViews');
            const savedLikes = localStorage.getItem('articleLikes');
            
            if (savedViews) {
                articleViews = JSON.parse(savedViews);
            } else {
                articles.forEach(article => {
                    articleViews[article.id] = Math.floor(Math.random() * 500) + 100;
                });
                localStorage.setItem('articleViews', JSON.stringify(articleViews));
            }
            
            if (savedLikes) {
                articleLikes = JSON.parse(savedLikes);
            } else {
                articles.forEach(article => {
                    articleLikes[article.id] = {
                        count: Math.floor(Math.random() * 50) + 10,
                        liked: false
                    };
                });
                localStorage.setItem('articleLikes', JSON.stringify(articleLikes));
            }
        }

        function incrementViews(articleId) {
            articleViews[articleId] = (articleViews[articleId] || 0) + 1;
            localStorage.setItem('articleViews', JSON.stringify(articleViews));
        }

        function toggleLike(articleId) {
            if (!articleLikes[articleId]) {
                articleLikes[articleId] = { count: 0, liked: false };
            }
            
            if (articleLikes[articleId].liked) {
                articleLikes[articleId].count--;
                articleLikes[articleId].liked = false;
            } else {
                articleLikes[articleId].count++;
                articleLikes[articleId].liked = true;
            }
            
            localStorage.setItem('articleLikes', JSON.stringify(articleLikes));
            renderArticlesList();
        }

        function getAverageRating(articleId) {
            const articleComments = allComments.filter(c => c.article_id === articleId && c.rating > 0);
            if (articleComments.length === 0) return 0;
            const sum = articleComments.reduce((acc, c) => acc + c.rating, 0);
            return (sum / articleComments.length).toFixed(1);
        }

        function renderStars(rating) {
            let starsHtml = '';
            for (let i = 1; i <= 5; i++) {
                starsHtml += `<span class="star ${i <= rating ? 'filled' : ''}">â˜…</span>`;
            }
            return starsHtml;
        }

        function renderArticlesList() {
            const grid = document.getElementById('articlesGrid');
            grid.innerHTML = '';
            
            articles.forEach(article => {
                const card = document.createElement('div');
                card.className = 'article-card';
                
                const avgRating = getAverageRating(article.id);
                const views = articleViews[article.id] || 0;
                const likes = articleLikes[article.id] || { count: 0, liked: false };
                const commentsCount = allComments.filter(c => c.article_id === article.id).length;
                
                card.innerHTML = `
                    <img src="${article.image}" alt="${article.title}">
                    <div class="article-card-content">
                        <h3 class="article-card-title">${article.title}</h3>
                        <p class="article-card-excerpt">${article.excerpt}</p>
                        <div class="article-stats">
                            <div class="stat-item">
                                <div class="star-rating">${renderStars(Math.round(avgRating))}</div>
                                <span>${avgRating > 0 ? avgRating : 'Ø¨Ø¯ÙˆÙ† Ø§Ù…ØªÛŒØ§Ø²'}</span>
                            </div>
                            <div class="stat-item">
                                ğŸ‘ï¸ ${views}
                            </div>
                            <div class="stat-item">
                                <button class="like-button ${likes.liked ? 'liked' : ''}" data-article-id="${article.id}">
                                    â¤ï¸
                                </button>
                                <span>${likes.count}</span>
                            </div>
                            <div class="stat-item">
                                ğŸ’¬ ${commentsCount}
                            </div>
                        </div>
                    </div>
                `;
                
                // Add click handler for card (except like button)
                card.addEventListener('click', (e) => {
                    if (!e.target.classList.contains('like-button')) {
                        showArticle(article.id);
                    }
                });
                
                // Add click handler for like button
                const likeBtn = card.querySelector('.like-button');
                likeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleLike(article.id);
                });
                
                grid.appendChild(card);
            });
        }

        function showArticle(articleId) {
            currentArticle = articles.find(a => a.id === articleId);
            if (!currentArticle) return;
            
            incrementViews(articleId);
            
            document.getElementById('articlesListPage').classList.add('hidden');
            document.getElementById('articleDetailPage').classList.remove('hidden');
            
            const detailContainer = document.getElementById('articleDetail');
            const avgRating = getAverageRating(articleId);
            const views = articleViews[articleId] || 0;
            const likes = articleLikes[articleId] || { count: 0, liked: false };
            
            detailContainer.innerHTML = `
                <div class="article-header">
                    <h1 class="article-detail-title">${currentArticle.title}</h1>
                    <div class="article-meta">
                        Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡: ${currentArticle.author} | ØªØ§Ø±ÛŒØ® Ø§Ù†ØªØ´Ø§Ø±: ${currentArticle.date}
                    </div>
                    <div class="article-stats">
                        <div class="stat-item">
                            <div class="star-rating">${renderStars(Math.round(avgRating))}</div>
                            <span>${avgRating > 0 ? avgRating : 'Ø¨Ø¯ÙˆÙ† Ø§Ù…ØªÛŒØ§Ø²'}</span>
                        </div>
                        <div class="stat-item">
                            ğŸ‘ï¸ ${views} Ø¨Ø§Ø²Ø¯ÛŒØ¯
                        </div>
                        <div class="stat-item">
                            â¤ï¸ ${likes.count} Ù„Ø§ÛŒÚ©
                        </div>
                    </div>
                </div>
                <img src="${currentArticle.image}" alt="${currentArticle.title}" class="article-featured-image" onerror="this.style.display='none';">
                <div class="article-content">
                    ${currentArticle.content}
                </div>
            `;
            
            renderComments();
            setupRatingStars();
            window.scrollTo(0, 0);
        }

        function setupRatingStars() {
            const stars = document.querySelectorAll('.rating-star');
            stars.forEach(star => {
                star.addEventListener('click', () => {
                    selectedRating = parseInt(star.dataset.rating);
                    updateRatingStars();
                });
                
                star.addEventListener('mouseenter', () => {
                    const rating = parseInt(star.dataset.rating);
                    stars.forEach((s, index) => {
                        if (index < rating) {
                            s.classList.add('active');
                        } else {
                            s.classList.remove('active');
                        }
                    });
                });
            });
            
            document.getElementById('ratingStars').addEventListener('mouseleave', updateRatingStars);
        }

        function updateRatingStars() {
            const stars = document.querySelectorAll('.rating-star');
            stars.forEach((star, index) => {
                if (index < selectedRating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function renderComments() {
            const commentsList = document.getElementById('commentsList');
            const articleComments = allComments.filter(c => c.article_id === currentArticle.id);
            
            if (articleComments.length === 0) {
                commentsList.innerHTML = '<p class="loading-message">Ù‡Ù†ÙˆØ² Ù†Ø¸Ø±ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª. Ø§ÙˆÙ„ÛŒÙ† Ù†ÙØ± Ø¨Ø§Ø´ÛŒØ¯!</p>';
                return;
            }
            
            commentsList.innerHTML = '';
            articleComments.reverse().forEach(comment => {
                const commentDiv = document.createElement('div');
                commentDiv.className = 'comment-item';
                
                const date = new Date(comment.created_at);
                const dateStr = date.toLocaleDateString('fa-IR');
                
                commentDiv.innerHTML = `
                    <div class="comment-header">
                        <span class="comment-author">${comment.author_name}</span>
                        <span class="comment-date">${dateStr}</span>
                    </div>
                    ${comment.rating > 0 ? `<div class="comment-rating">${renderStars(comment.rating)}</div>` : ''}
                    <p class="comment-text">${comment.comment_text}</p>
                `;
                
                commentsList.appendChild(commentDiv);
            });
        }

        function showArticlesList() {
            document.getElementById('articleDetailPage').classList.add('hidden');
            document.getElementById('articlesListPage').classList.remove('hidden');
            currentArticle = null;
            selectedRating = 0;
            document.getElementById('commentForm').reset();
            document.getElementById('formError').classList.add('hidden');
            window.scrollTo(0, 0);
        }

        document.getElementById('backButton').addEventListener('click', showArticlesList);

        document.getElementById('commentForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!currentArticle) return;
            
            const authorName = document.getElementById('authorName').value.trim();
            const commentText = document.getElementById('commentText').value.trim();
            const errorDiv = document.getElementById('formError');
            const submitButton = document.getElementById('submitButton');
            
            if (!authorName || !commentText) {
                errorDiv.textContent = 'Ù„Ø·ÙØ§Ù‹ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯.';
                errorDiv.classList.remove('hidden');
                return;
            }
            
            errorDiv.classList.add('hidden');
            submitButton.disabled = true;
            submitButton.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...';
            
            const newComment = {
                article_id: currentArticle.id,
                author_name: authorName,
                comment_text: commentText,
                rating: selectedRating,
                created_at: new Date().toISOString()
            };
            
            const result = await window.dataSdk.create(newComment);
            
            if (result.isOk) {
                document.getElementById('commentForm').reset();
                selectedRating = 0;
                updateRatingStars();
                submitButton.textContent = 'Ù†Ø¸Ø± Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯!';
                setTimeout(() => {
                    submitButton.textContent = 'Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±';
                    submitButton.disabled = false;
                }, 2000);
            } else {
                errorDiv.textContent = 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±. Ù„Ø·ÙØ§Ù‹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.';
                errorDiv.classList.remove('hidden');
                submitButton.disabled = false;
                submitButton.textContent = 'Ø§Ø±Ø³Ø§Ù„ Ù†Ø¸Ø±';
            }
        });

        async function onConfigChange(config) {
            document.getElementById('siteTitle').textContent = config.site_title || defaultConfig.site_title;
            document.getElementById('aboutTitle').textContent = config.about_title || defaultConfig.about_title;
            document.getElementById('aboutDescription').textContent = config.about_description || defaultConfig.about_description;
            document.getElementById('footerText').textContent = config.footer_text || defaultConfig.footer_text;
            
            document.body.style.backgroundColor = config.background_color || defaultConfig.background_color;
            document.querySelector('header').style.backgroundColor = config.surface_color || defaultConfig.surface_color;
            document.querySelector('.about-section').style.backgroundColor = config.surface_color || defaultConfig.surface_color;
            document.querySelector('footer').style.backgroundColor = config.primary_action_color || defaultConfig.primary_action_color;
            
            document.querySelectorAll('.site-title, .about-title, .page-title, .article-card-title, .article-detail-title, .comments-title, .rating-title').forEach(el => {
                el.style.color = config.text_color || defaultConfig.text_color;
            });
            
            document.querySelectorAll('.back-button, .submit-button').forEach(el => {
                el.style.backgroundColor = config.primary_action_color || defaultConfig.primary_action_color;
            });
        }

        const dataHandler = {
            onDataChanged(data) {
                allComments = data;
                if (currentArticle) {
                    renderComments();
                    
                    // Update article detail stats
                    const avgRating = getAverageRating(currentArticle.id);
                    const detailContainer = document.getElementById('articleDetail');
                    const statsDiv = detailContainer.querySelector('.article-stats');
                    if (statsDiv) {
                        const views = articleViews[currentArticle.id] || 0;
                        const likes = articleLikes[currentArticle.id] || { count: 0, liked: false };
                        statsDiv.innerHTML = `
                            <div class="stat-item">
                                <div class="star-rating">${renderStars(Math.round(avgRating))}</div>
                                <span>${avgRating > 0 ? avgRating : 'Ø¨Ø¯ÙˆÙ† Ø§Ù…ØªÛŒØ§Ø²'}</span>
                            </div>
                            <div class="stat-item">
                                ğŸ‘ï¸ ${views} Ø¨Ø§Ø²Ø¯ÛŒØ¯
                            </div>
                            <div class="stat-item">
                                â¤ï¸ ${likes.count} Ù„Ø§ÛŒÚ©
                            </div>
                        `;
                    }
                }
                renderArticlesList();
            }
        };

        async function initializeApp() {
            initializeStats();
            renderArticlesList();
            
            // Initialize Data SDK first
            if (window.dataSdk) {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    const errorDiv = document.getElementById('formError');
                    if (errorDiv) {
                        errorDiv.textContent = 'Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ… Ù†Ø¸Ø±Ø§Øª';
                        errorDiv.classList.remove('hidden');
                    }
                }
            }
            
            // Initialize Element SDK
            if (window.elementSdk) {
                await window.elementSdk.init({
                    defaultConfig: defaultConfig,
                    onConfigChange: onConfigChange,
                    mapToCapabilities: (config) => ({
                        recolorables: [
                            {
                                get: () => config.background_color || defaultConfig.background_color,
                                set: (value) => {
                                    config.background_color = value;
                                    window.elementSdk.setConfig({ background_color: value });
                                }
                            },
                            {
                                get: () => config.surface_color || defaultConfig.surface_color,
                                set: (value) => {
                                    config.surface_color = value;
                                    window.elementSdk.setConfig({ surface_color: value });
                                }
                            },
                            {
                                get: () => config.text_color || defaultConfig.text_color,
                                set: (value) => {
                                    config.text_color = value;
                                    window.elementSdk.setConfig({ text_color: value });
                                }
                            },
                            {
                                get: () => config.primary_action_color || defaultConfig.primary_action_color,
                                set: (value) => {
                                    config.primary_action_color = value;
                                    window.elementSdk.setConfig({ primary_action_color: value });
                                }
                            }
                        ],
                        borderables: [],
                        fontEditable: undefined,
                        fontSizeable: undefined
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ["site_title", config.site_title || defaultConfig.site_title],
                        ["about_title", config.about_title || defaultConfig.about_title],
                        ["about_description", config.about_description || defaultConfig.about_description],
                        ["footer_text", config.footer_text || defaultConfig.footer_text]
                    ])
                });
            }
        }

        // Wait for DOM to be ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99d86c97504fdcb2',t:'MTc2Mjk3NTYxOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
